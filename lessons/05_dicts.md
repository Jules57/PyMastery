## Dict (Словарь)

**Словарь** - это объект-контейнер, который хранит коллекцию данных. Каждый элемент в словаре имеет две части:
ключ и значение. Ключи используют, чтобы установить местонахождение конкретного значения.

Пары "ключ-значение" часто называются _отображениями_, потому что каждому ключу поставлено в соответствие значение, т.
е.
каждый ключ как бы отображается на соответствующее ему значение.

![](https://yourbasic.org/algorithms/hash-table.png)

Ключами словаря могут быть только хэшируемые объекты (в случае стандартных типов данных неизменяемые объекты - int,
float, str, tuple (если состоит только из хэшируемых объектов)).

Значениями словаря могут быть любые объекты, в том числе другие словари. В таком случае мы получаем структуру
вложенных словарей.

### Создание словаря

Есть несколько способов создать словарь:

- создание напрямую
- создание при помощи функции dict()
- создание при помощи функции fromkeys()
- при помощи dict comprehension

Рассмотрим все эти способы на примере:

```python
# Создание пустого словаря
d = {}
d = dict()
# {}

# Создание словаря напрямую
pirate = {
    "name": "William",
    "surname": "Turner",
    "age": 30,
    "city": "Jamaica"
}
# {'name': 'William', 'surname': 'Turner', 'age': 30, 'city': 'Jamaica'}

pirate = {
    "name": "William",
    "surname": "Turner",
    "age": 30,
    "history": {
        "ship": "The Flying Dutchman",
        "position": "captain"
    }

}
# {'name': 'William', 'surname': 'Turner', 'age': 30, 'history': {'ship': 'The Flying Dutchman', 'position': 'captain'}}

# создание словаря при помощи функции dict(), она же используется для приведения типов:
d = dict(short='dict', long='dictionary')
# {'short': 'dict', 'long': 'dictionary'}

d = dict([(1, 1), (2, 4)])
# {1: 1, 2: 4}

# создание словаря при помощи функции fromkeys():
d = dict.fromkeys(['a', 'b', 1, (1, 2)])
# {'a': None, 1: None, 'b': None, (1, 2): None}

# с заполнением одним значением
d = dict.fromkeys(['a', 'b', 1, (1, 2)], 4)
# {'a': 4, 1: 4, 'b': 4, (1, 2): 4}

# создание словаря при помощи dict comprehension, по аналогии со списками:
squares = {x: x ** 2 for x in range(1, 6)}
# {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}

# Inverting a dictionary where keys become values and values become keys.

original_dict = {'a': 1, 'b': 2, 'c': 3}
inverted_dict = {value: key for key, value in original_dict.items()}
# {1: 'a', 2: 'b', 3: 'c'}

# Creating a dictionary from another dictionary, but only including items where the value is greater than 2.
original_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4}
filtered_dict = {key: value for key, value in original_dict.items() if value > 2}
# {'c': 3, 'd': 4}

# Using two lists to create a dictionary where the first list contains the keys and the second list contains the values.
keys = ['name', 'age', 'city']
values = ['Alice', 25, 'New York']
combined_dict = {keys[i]: values[i] for i in range(len(keys))}
# {'name': 'Alice', 'age': 25, 'city': 'New York'}
```

У функции dict() есть одна особенность, с ее помощью можно быстро создавать словари с ключами-строками, опуская кавычки.
Это показано в примере ниже. К сожалению, работает только с явными строками, принцип формирования которых такой же, как
и принцип наименования переменных:

```python
dict(a=1, b=2, c=3, d=13)
# {'a': 1, 'c': 3, 'b': 2, 'd': 13}

dict(a=1, b=2, c=3, d=13, 1 = 2)
# File "<stdin>", line 1
# SyntaxError: keyword can't be an expression
```

### Методы словарей

| Метод        | Описание                                                                                            |
|--------------|-----------------------------------------------------------------------------------------------------|
| clear()      | Удаляет все элементы из словаря                                                                     |
| copy()       | Возвращает копию словаря                                                                            |
| fromkeys()   | Возвращает словарь с указанными ключами и значением                                                 |
| get()        | Возвращает значение указанного ключа                                                                |
| items()      | Возвращает список, содержащий кортеж для каждой пары ключ-значение                                  |
| keys()       | Возвращает список, содержащий ключи словаря                                                         |
| pop()        | Удаляет элемент с указанным ключом                                                                  |
| popitem()    | Удаляет последнюю вставленную пару ключ-значение                                                    |
| setdefault() | Возвращает значение указанного ключа. Если ключ не существует, добавляет ключ с указанным значением |
| update()     | Обновляет словарь указанными парами ключ-значение                                                   |
| values()     | Возвращает список всех значений в словаре                                                           |


## Получение значения из словаря

- оператор []
```python
my_dict = {'name': 'Will', 'age': 30}
name = my_dict['name']
# 'Will'
```

- метод `get()`

Метод `get()` позволяет получить значение по ключу из словаря. Если ключ отсутствует, возвращает `None` или указанное 
значение по умолчанию.

Взятие элемента из словаря по ключу лучше осуществлять не через квадратные скобки [], а при помощи метода `get()`. Если
элемент отсутствует, обычное взятие по ключу выдаст ошибку, а метод `get()` позволяет вам этого избежать. Метод `get()`
вернёт вам `None`, если ключ был не найден, или значение по умолчанию, если вы указали его вторым параметром:

```python
my_dict = {'name': 'Will', 'age': 30}
age = my_dict.get('age')
# 30

# Получение значения с несуществующим ключом, возвращается None
city = my_dict.get('city')
# None

# Получение значения с несуществующим ключом с указанием значения по умолчанию
city = my_dict.get('city', 'Unknown')
# Unknown
```

- метод `setdefault()`

Метод `setdefault()` пытается получить значение по ключу. Если ключ не найден, добавляет ключ с указанным значением по 
умолчанию в словарь и возвращает это значение.

```python
my_dict = {'name': 'Will', 'age': 30}

# Получение существующего значения
name = my_dict.setdefault('name', 'Unknown')
# Will

# Добавление нового ключа сo значением по умолчанию
city = my_dict.setdefault('city', 'Jamaica')
# Jamaica
```
- итерация по ключам для получения значений

Можно итерировать по ключам словаря, чтобы получить значения.

```python
my_dict = {'name': 'Will', 'age': 30}
for key in my_dict:
    print(f"{key}: {my_dict[key]}")
# name: Will
# age: 30
```

Каждый из этих методов имеет свои преимущества в зависимости от ситуации. Использование метода `get()` или 
`setdefault()` может быть предпочтительнее для предотвращения исключений при отсутствии ключа в словаре.


## Добавление элементов в словарь


Чтобы добавить новый элемент в словарь, просто присвойте значение новому ключу. Если ключ уже существует, его значение 
будет обновлено.

```python
my_dict = {'name': 'Will', 'age': 30}

# Добавление нового элемента
my_dict['city'] = 'Jamaica'

# Теперь словарь содержит новый элемент
print(my_dict)
# {'name': 'Will', 'age': 30, 'city': 'Jamaica'}
```

Обновление существующего элемента

Если ключ уже существует, вы можете просто присвоить ему новое значение для обновления.

```python
# Обновление значения для существующего ключа
my_dict['age'] = 31

# Словарь теперь обновлен
print(my_dict)
# {'name': 'Will', 'age': 31, 'city': 'Jamaica'}
```

Метод `update()` берет каждую пару ключ-значение из другого словаря и добавляет их в словарь, вызвавший метод. Если 
ключ уже существует, его значение обновляется; если ключ новый, он добавляется в словарь вместе со своим значением. 
Это мощный способ для объединения словарей или обновления данных в словаре на основе другого набора данных.

```python
# Добавление элементов из другого словаря
dсt = {'a': 1, 'c': 3, 'b': 2, 'd': 13}
dсt.update({'4': 4, '5': 5})
# {'a': 1, 'c': 3, 'b': 2, '5': 5, 'd': 13, '4': 4}

# Количество пар ключ-значение в словаре
len(dct)
# 6
```
Словари поддерживают операторы `in` и `not in`,  которые позволяют проверить, содержится ли ключ в словаре. Эти 
операторы проверяют наличие ключа среди всех ключей словаря, не затрагивая значения. Использование этих операторов может 
быть очень удобно для условных выражений, проверки данных перед их использованием, а также для увеличения читаемости и 
безопасности кода.

```python
my_dict = {'name': 'Will', 'age': 30, 'city': 'Jamaica'}

# Проверка наличия ключа 'age' в словаре
if 'age' in my_dict:
    print("The key is found.")
else:
    print("Key 'age' is not found in the dict.")
# The key is found.

# Проверка отсутствия ключа 'job' в словаре
if 'job' not in my_dict:
    my_dict['job'] = 'Pirate'  # Добавляем новый элемент, если его не было
    print("Key 'job' was added to the dict.")
else:
    print("Key 'job' already exists in the dict.")
# Key 'job' was added to the dict.
```

## Удаление элементов из словаря

Удаление пар ключ-значение из словаря в Python может быть выполнено несколькими способами, каждый из которых подходит 
для разных сценариев.

1. Использование оператора `del`

Оператор `del` позволяет удалить пару ключ-значение из словаря по указанному ключу. Если ключ не существует в словаре, 
будет выброшено исключение `KeyError`.

```python
my_dict = {'name': 'Will', 'age': 30, 'city': 'Jamaica'}
del my_dict['age']  # Удаляем пару по ключу 'age'

# Проверяем результат
print(my_dict)
# {'name': 'Will', 'city': 'Jamaica'}
```

2. Метод `pop()`

Метод `pop()` удаляет пару ключ-значение по указанному ключу и возвращает значение этого ключа. Если ключ не найден, 
и не указано значение по умолчанию, будет выброшено исключение `KeyError`.

```python
my_dict = {'name': 'Will', 'age': 30, 'city': 'Jamaica'}
age = my_dict.pop('age')  # Удаляем 'age' и сохраняем значение

# Проверяем результат
print(f"Removed age: {age}")
print(my_dict)
# Removed age: 30
# {'name': 'Иван', 'city': 'Jamaica'}
```

3. Метод `popitem()`

Метод `popitem()` удаляет и возвращает последнюю пару ключ-значение (в версиях Python 3.7 и выше, где словари 
упорядочены). В более ранних версиях Python до 3.7 словари не гарантировали порядок элементов, и `popitem()` удалял 
произвольную пару.

```python
my_dict = {'name': 'Will', 'age': 30, 'city': 'Jamaica'}
item = my_dict.popitem()  # Удаляем и возвращаем последнюю пару

# Проверяем результат
print(f"Removed pair: {item}")
print(my_dict)
# Removed pair: ('city', 'Jamaica')
# {'name': 'Will', 'age': 30}
```

4. Метод `clear()` - удаление всех элементов словаря

Для удаления всех пар ключ-значение из словаря используйте метод `clear()`. Этот метод очищает словарь, не удаляя сам 
словарь.

```python
my_dict.clear() 
# {}
```


Каждый из этих методов подходит для разных задач: `del` и `pop()` для удаления конкретных элементов, `popitem()` для 
удаления последнего элемента в упорядоченном словаре, а `clear()` для полной очистки словаря.


## Словари в цикле for

Цикл for в Python часто используется для итерации по словарям, позволяя выполнить операции с ключами, значениями или 
обоими. В словарях можно итерировать по ключам напрямую, использовать метод `keys()` для получения ключей, `values()` 
для значений и `items()` для пар ключ-значение. Ниже приведены примеры использования цикла `for` со словарями.

**Итерация по ключам словаря**

Простейший способ использования цикла `for` со словарем — это итерация по его ключам (работает по умолчанию или явно
при вызове метода `keys()`). Метод `keys()` возвращает все ключи словаря в виде словарного представления. Каждый
элемент в словарном представлении является ключом словаря.

```python
my_dict = {'name': 'Will', 'age': 30, 'city': 'Jamaica'}

for key in my_dict:
    print(key)
```

Используйте метод `values()` для итерации по значениям словаря. Метод `values()` возвращает все значения словаря (без 
своих ключей) в виде словарного представления. Каждый элемент в словарном представлении является значением из словаря.

```python
for value in my_dict.values():
    print(value)
```

Для одновременной работы с ключами и значениями используйте метод `items()`.

Метод `items()` возвращает все ключи словаря и связанными с ними значения. Они возвращаются в виде последовательности
особого типа, которая называется _словарным представлением_. Каждый элемент в словарном представлении является 
кортежем, и каждый кортеж содержит ключ и связанное с ним значение.

```python
for key, value in my_dict.items():
    print(f"{key}: {value}")
```

Можно изменять значения в словаре во время итерации, используя цикл `for`.

```python
# Увеличение возраста на 1
for key in my_dict:
    if key == 'age':
        my_dict[key] += 1

print(my_dict)
# {'name': 'Will', 'age': 31, 'city': 'Jamaica'}
```

Использование цикла `for` с методами `keys()`, `values()`, и `items()` делает работу со словарями в Python гибкой и 
мощной, позволяя легко извлекать и манипулировать данными.


## Dict Comprehesion

Dict Comprehension - это лаконичный, удобный для чтения способ создания и построения словарей. Это мощная функция, 
которая позволяет динамически генерировать словарь в одной, короткой строке кода. Этот метод часто быстрее и 
синтаксически элегантнее, чем традиционные циклы и методы работы со словарями.

Словарь состоит из пары выражений (ключ: значение), за которыми следует оператор for, а затем ноль или более 
операторов for или if. Выражение определяет, как ключи и значения в новом словаре получаются из итерируемой 
последовательности, по которой выполняется цикл.

Базовый синтаксис

`{key: value for item in iterable if condition}`

- **key**: ключ для каждого элемента словаря.
- **value**: значение для каждого элемента словаря.
- **iterable**: последовательность, коллекция или объект итератора.
- **condition**: (необязательно) условие для фильтрации элементов из итерируемого словаря.


```python
squares = {x: x**2 for x in range(1, 6)}

fruits = ['apple', 'banana', 'cherry']
fruit_dict = {fruit: index for index, fruit in enumerate(fruits)}

keys = ['name', 'age', 'city']
values = ['Alice', 25, 'New York']
combined_dict = {keys[i]: values[i] for i in range(len(keys))}
```

Словари до версии питона 3.7 были не упорядоченными (т.к. хэш таблица), по после 3.8 разработчики при помощи какой-то
магии заставили словари быть упорядоченными, до этого если нужен был упорядоченный словарь приходилось использовать
отдельный тип данных.



# Практические задачи

1. Написать функцию, которая будет менять в словаре ключи и значения между собой местами. Было {1:2, 3:4} стало {2:1, 4:
   3}
2. Создать словарь оценок предполагаемых студентов (Ключ - ФИ студента, значение - список оценок студентов). Найти
   самого успешного и самого отстающего по среднему баллу.
3. Создать структуру данных для студентов из имен и фамилий, можно случайных. Придумать структуру данных, чтобы
   указывать, в какой группе учится студент (Группы Python, FrontEnd, FullStack, Java). Студент может учиться в
   нескольких группах. Затем вывести:

- студентов, которые учатся в двух и более группах
- студентов, которые не учатся на фронтенде
- студентов, которые изучают Python или Java
