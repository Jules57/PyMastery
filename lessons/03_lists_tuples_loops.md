# Лекция 3: Списки и методы списков. Циклы `for` и `while`.

# Встроенные методы в Python: работа с данными и коллекциями

Python - это язык программирования, который предоставляет множество встроенных (built-in) методов для работы с данными и
коллекциями. Эти методы упрощают манипуляции с данными и делают код более читаемым и эффективным. В этой статье мы
рассмотрим несколько встроенных методов Python, включая `all`, `any`, `sorted`, `len`, `sum`, `min` и `max`.

## Методы для работы с коллекциями

### `all()` и `any()`

Метод `all()` проверяет, все ли элементы коллекции истинны (равны `True`). Если все элементы истинны, он
возвращает `True`, иначе - `False`. Рассмотрим пример:

```python
numbers = [1, 2, 3, 4, 5]
result = all(x > 0 for x in numbers)  # True, так как все числа положительные
```

Метод `any()` проверяет, есть ли хотя бы один истинный элемент в коллекции. Если хотя бы один элемент истинен, он
возвращает `True`, иначе - `False`. Рассмотрим пример:

```python
numbers = [1, 2, 3, -1, -2]
result = any(x < 0 for x in numbers)  # True, так как есть отрицательные числа
```

### `sorted()`

Метод `sorted()` сортирует элементы коллекции в порядке возрастания (по умолчанию) и возвращает новый список. Он также
может принимать дополнительный аргумент `reverse=True` для сортировки в обратном порядке. Рассмотрим пример:

```python
numbers = [3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5]
sorted_numbers = sorted(numbers)  # [1, 1, 2, 3, 3, 4, 5, 5, 5, 6, 9]
```

## Методы для работы с данными

### `len()`

Метод `len()` используется для определения длины (количества элементов) коллекции, включая строки, списки, кортежи и
другие. Рассмотрим примеры:

```python
text = "Привет, мир!"
length = len(text)  # Длина строки: 12

numbers = [1, 2, 3, 4, 5]
length = len(numbers)  # Длина списка: 5
```

### `sum()`

Метод `sum()` вычисляет сумму всех элементов числовой коллекции, такой как список или кортеж. Рассмотрим пример:

```python
numbers = [1, 2, 3, 4, 5]
total = sum(numbers)  # Сумма: 15
```

### `min()` и `max()`

Метод `min()` находит наименьший элемент в числовой коллекции, а метод `max()` - наибольший. Рассмотрим пример:

```python
numbers = [3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5]
min_value = min(numbers)  # Минимум: 1
max_value = max(numbers)  # Максимум: 9
```

Практика:

1. Используя any, выяснить все ли числа в списке положительные.
2. Используя all, выяснить все ли числа в списке четные.
3. Из двух списков чисел выяснить, в каком сумма элементов больше.

## Списки (Lists)

Список - это упорядоченная коллекция элементов, которая может содержать объекты разных типов. Они очень полезны при
работе с множеством данных.

### Создание списков

Создать список можно, заключив элементы в квадратные скобки `[]` и разделив их запятыми или с помощью функции `list()`.

```python
fruits = ['apple', 'banana', 'pear', 'orange']
numbers = [1, 2, 3, 4, 5]
mixed_list = [1, 'two', 3.0, True]
```

### Доступ к элементам списка

Чтобы получить доступ к элементам списка, используйте индексацию, начиная с 0.

```python
print(fruits[0])  # Вывод: 'яблоко'
print(numbers[2])  # Вывод: 3
```

### Изменение элементов списка

Списки являются изменяемыми, поэтому вы можете изменять их элементы.

```python
fruits[1] = 'kiwi'
print(fruits)  # Вывод: ['apple', 'kiwi', 'pear', 'orange']
```

### Добавление и удаление элементов

Чтобы добавить элемент в конец списка, используйте метод `append()`.

```python
fruits.append('pineapple')
print(fruits)  # Вывод: ['apple', 'kiwi', 'pear', 'orange', 'pineapple']
```

Чтобы удалить элемент по индексу, используйте `del`.

```python
del fruits[2]
print(fruits)  # Вывод: ['apple', 'kiwi', 'orange', 'pineapple']
```

### Методы списков

| Method    | Description                                                                             |
|-----------|-----------------------------------------------------------------------------------------|
| append()  | 	Добавляет элемент в конец списка                                                       |
| clear()   | 	Удаляет все элементы из списка                                                         |
| copy()    | 	Возвращает копию списка                                                                |
| count()   | 	Возвращает количество элементов с указанным значением                                  |
| extend()  | 	Добавляет элементы списка (или итерируемой последовательности) в конец текущего списка |
| index()   | 	Возвращает индекс первого элемента с указанным значением                               |
| insert()  | 	Добавляет элемент по указанному индексу                                                |
| pop()     | 	Удаляет элемент по указанному индексу или последний элемент списка                     |
| remove()  | 	Удаляет элемент по значению                                                            |
| reverse() | 	Изменяет порядок следования элементов в списке на противоположный                      |
| sort()    | 	Сортирует список по возрастанию                                                        |

Внутри CPython (стандартного интерпретатора), список и кортеж реализованы как список из указателей (ссылок) на Python 
объекты, т.е. физически они не хранят объекты рядом друг с другом. Когда вы удаляете объект из списка, происходит 
удаление ссылки на этот объект. Если на объект ещё кто-то ссылается, то он продолжит находиться в памяти.

## Кортежи

Кортеж— это неизменяемая последовательность; под этим подразумевается, что его содержимое невозможно изменить.
Кортеж— это последовательность, которая очень напоминает список. Главная разница между кортежами и списками состоит 
в том, что кортежи являются немутируемыми последовательностями. Это означает, что после создания кортежа его невозможно 
изменить. Как показано в приведенном ниже интерактивном сеансе, во время создания кортежа его элементы заключаются в 
круглые скобки:

```python
my_tuple = (1, 2, 3, 4, 5) 
    print(my_tuple)
(1, 2, 3, 4, 5)
```

Подобно спискам кортежи поддерживают индексацию. Кортежи поддерживают те же самые операции, что и списки, за 
исключением тех, которые изменяют содержимое списка. 

Если необходимо создать кортеж всего с одним элементом, то после значения элемента следует написать замыкающую запятую:
```python
my_tuple = (1,) # Создает кортеж всего с одним элементом.
```

Благодаря кортежам мы можем написать замену переменных в одну строку, в большинстве языков программирования, это чуть
более сложная задача. 

```python
a = 100
b = 200
a, b = b, a
print(a, b)      # 200, 100
```

Если единственным различием между списками и кортежами является их способность изменять свои значения, т. е. 
мутируемость, то вы можете задаться вопросом: зачем нужны кортежи? Одной из причин существования кортежей является 
производительность. Обработка кортежа выполняется быстрее, чем обработка списка, и поэтому кортежи — это удачный вариант,
когда обрабатывается большой объем данных и эти данные не будут изменяться. Еще одна причина состоит в том, что кортежи 
безопасны. Поскольку содержимое кортежа изменять нельзя, в нем можно хранить данные, оставаясь уверенным, что они не 
будут (случайно или каким-либо иным образом) изменены в программе.

Кроме того, в Python существуют определенные операции, которые требуют применения кортежа. По мере освоения языка 
Python вы будете чаще сталкиваться с кортежами.


**Что нужно запомнить?**
- Кортеж неизменяем, список — изменяем.
- Кортеж занимает меньше памяти, чем список.
- Копирование кортежа происходит немного быстрее, чем копирование списка.
- Используйте кортеж, если вам нужен список, который вы не собираетесь изменять.
- Могут выступать в качестве ключей для словаря (если не содержат нехэшируемых значений).
- Имеют только два метода: `count()` и `index()`.
- Используются для массовой инициализации переменных и возврата сразу нескольких значений из функции.

Больше информации о разнице между списками и кортежами [здесь](https://habr.com/ru/articles/417783/).

## Объект range

Тип range представляет собой неизменяемую последовательность чисел и обычно используется для выполнения циклов `for` 
определенное количество раз.

_range(start, stop[, step])_

- `start` - значение параметра start (или 0, если параметр не был задан).
- `stop` - значение параметра stop
- `step` - значение параметра step (или 1, если параметр не был предоставлен).

Аргументы конструктора range должны быть целыми числами (либо встроенными int, либо любым объектом, реализующим 
специальный метод `__index__()`). Если аргумент step опущен, то по умолчанию он принимает значение 1. 
Если аргумент start опущен, то по умолчанию он принимает значение 0. Если step равен нулю, то возникает ошибка 
ValueError.

```python
list(range(10))
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
list(range(1, 11))
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
list(range(0, 30, 5))
[0, 5, 10, 15, 20, 25]
list(range(0, 10, 3))
[0, 3, 6, 9]
list(range(0, -10, -1))
[0, -1, -2, -3, -4, -5, -6, -7, -8, -9]
list(range(0))
[]
list(range(1, 0))
[]
```
Range реализует все обычные операции с последовательностями, кроме конкатенации и повторения (из-за того, что объекты 
range могут представлять только последовательности, которые следуют строгому шаблону, а повторение и конкатенация 
обычно нарушают этот шаблон).

Преимущество типа range перед обычным списком или кортежем заключается в том, что объект range всегда будет занимать 
одинаковый (48 байт) объем памяти, независимо от размера диапазона, который он представляет (поскольку он хранит 
только значения start, stop и step, вычисляя отдельные элементы и поддиапазоны по мере необходимости).

## Циклы `for` и `while`

Циклы позволяют выполнять повторяющиеся операции.

### Цикл `for`

Цикл `for` используется для итерации по коллекциям, таким как списки и строки. Цикл со счетчиком повторений повторяется
заданное количество раз. В Python для написания цикла со счетчиком повторений применяется инструкция `for`.

```python
fruits = ['apple', 'kiwi', 'pear', 'orange']

for fruit in fruits:
    print(fruit)
```


### Применение функции range() с циклом for
Python предоставляет встроенную функцию range (диапазон), которая упрощает процесс написания цикла со счетчиком 
повторений. Функция range создает тип объекта, который называется итерируемым, т. е. пригодным для итеративной 
обработки в цикле. Итерируемый объект аналогичен списку. Он содержит последовательность значений, которые можно по 
порядку обойти на основе чего-то наподобие цикла. Вот пример для цикла, который применяет функцию range:

```python
for num in range(5): 
   print(num)
```
   
   
Обратите внимание, что вместо использования списка значений мы вызываем функцию range, передавая 5 в качестве аргумента.
В этой инструкции функция range порождает итерируемую последовательность целых чисел в диапазоне от 0 до 
(но не включая) 5. Этот фрагмент кода работает так же, как и приведенный ниже:

```python
for num in [0, 1, 2, 3, 4]: print(num)
```

### Цикл `while`

Цикл с условием повторения исполняет инструкции или набор инструкций повторно до тех пор, пока условие является
истинным. В Python для написания цикла с условием повторения применяется инструкция `while`.

Для простоты мы будем называть первую строку выражением while. Оно начинается со слова while, после которого идет
булево условие, вычисляемое как истина либо как ложь. После условия идет двоеточие. Начиная со следующей строки,
расположен блок инструкций.

При исполнении цикла while проверяется условие. Если условие является истинным, то исполняются инструкции, которые
расположены в блоке после выражения while, и цикл начинается сначала. Если условие является ложным, то программа
выходит из цикла.

Цикл while также называется циклом с предусловием, а именно он проверяет свое условие до того, как сделает итерацию.
Поскольку проверка осуществляется в начале цикла, обычно нужно выполнить несколько шагов перед началом цикла, чтобы
гарантировать, что цикл выполнится как минимум однажды.

```python
count = 0

while count < 5:
    print(count)
    count += 1
```

### Ключевое слово `break`

`break` используется для выхода из цикла досрочно, даже если условие цикла остается истинным. Обычно `break`
используется внутри условия, чтобы определить момент завершения цикла.

Пример с циклом `while`:

```python
count = 0

while count < 5:
    if count == 3:
        break  # Выход из цикла, если count равно 3
    print(count)
    count += 1
```

Пример с циклом `for`:

```python
fruits = ['apple', 'kiwi', 'pear', 'orange']

for fruit in fruits:
    if fruit == 'pear':
        break  # Выход из цикла при нахождении 'груши'
    print(fruit)
```

### Ключевое слово `continue`

`continue` используется для перехода к следующей итерации цикла, игнорируя оставшуюся часть текущей итерации.
Обычно `continue` используется внутри условия для пропуска определенных действий.

Пример с циклом `while`:

```python
count = 0

while count < 5:
    count += 1
    if count == 3:
        continue  # Пропустить вывод числа 3
    print(count)
```

Пример с циклом `for`:

```python
fruits = ['apple', 'kiwi', 'pear', 'orange']

for fruit in fruits:
    if fruit == 'pear':
        continue  # Пропустить вывод 'pear'
    print(fruit)
```

Ключевые слова `break` и `continue` полезны при создании более сложной логики в циклах и позволяют управлять потоком
выполнения программы в более гибком стиле.

Это основы работы с ключевыми словами `break` и `continue` в Python, списками, строками, срезами и циклами. Надеюсь,
что эта лекция помогла вам лучше понять эти концепции и как их использовать в вашем коде. Удачи в изучении Python и
разработке!

### Бесконечные циклы

Иногда может потребоваться создать бесконечный цикл, который будет выполняться до тех пор, пока его не прервут. Для
этого используется конструкция `while True`.

```python
while True:
    # Этот цикл будет выполняться бесконечно
    user_input = input("Enter something (press q to exit): ")
    if user_input == 'q':
        break  # Выход из цикла при вводе 'q'
```

Бесконечные циклы могут быть полезными в тех случаях, когда нужно создать программу, которая работает в фоновом режиме
и ожидает какого-либо события, либо когда нужно регулярно выполнять какую-то задачу, например, мониторинг сенсоров или
сетевых подключений.

Не забывайте, что бесконечные циклы должны иметь какой-то механизм для прерывания, иначе программа будет выполняться
бесконечно и может привести к зависанию.

## Что такое List Comprehension?

List Comprehension (генераторы списков) - это способ создания новых списков в Python на основе существующего списка или
другой итерируемой последовательности. Этот метод позволяет сократить количество кода и улучшить читаемость, особенно
при создании списков на основе условий.

Синтаксис List Comprehension выглядит следующим образом:

```python
new_list = [expression for item in iterable if condition]
```

Где:

- `new_list` - новый список, который будет создан.
- `expression` - выражение, которое определяет, какие элементы будут включены в новый список.
- `item` - переменная, которая принимает каждый элемент из итерируемой последовательности.
- `iterable` - итерируемая последовательность, например, список или кортеж.
- `condition` (опционально) - условие, которому должен соответствовать элемент, чтобы быть включенным в новый список.


Практика:

1. Создайте список numbers с числами от 1 до 10. Используя цикл for, выведите каждое число из списка numbers,
   возведенное в квадрат. Используя цикл for, найдите сумму всех чисел в списке numbers.
2. Создайте строку text с произвольным текстом. Используя цикл for, выведите каждый символ из строки text. Используя
   срезы, выведите первые 5 символов и последние 5 символов из строки text.
3. Создайте список чисел от 1 до 20. Используя цикл for, выведите все числа из списка, которые делятся на 3 без остатка.
   Используя цикл while, найдите сумму всех чисел от 1 до 100. Создайте бесконечный цикл с использованием while True,
   который будет предлагать пользователю ввод числа и выводить квадрат этого числа. Добавьте условие для выхода из цикла
   при вводе значения "0" или "exit".
4. Создайте список слов words, включая некоторые повторяющиеся слова. Используя цикл for, выведите все уникальные слова
   из списка.


Python - это язык программирования, который известен своей читаемостью и эффективностью в написании кода. Одним из
мощных инструментов, предоставляемых Python, является List Comprehension, или генераторы списков. Это синтаксическая
конструкция, которая позволяет создавать списки более компактно и эффективно. В этой статье мы рассмотрим, что такое
List Comprehension и как его использовать.

## Примеры использования List Comprehension

Создание списка чисел от 0 до 9:

```python
numbers = [x for x in range(10)]
# Результат: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

Создание списка квадратов чисел от 0 до 9:

```python
squares = [x ** 2 for x in range(10)]
# Результат: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```

Фильтрация элементов из списка:

```python
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
even_numbers = [x for x in numbers if not x % 2]
# Результат: [2, 4, 6, 8, 10]
```

Преобразование строк в список слов:

```python
text = "Привет, мир! Давайте изучать Python."
words = [word for word in text.split()]
# Результат: ['Привет,', 'мир!', 'Давайте', 'изучать', 'Python.']
```

## Вложенные List Comprehension

List Comprehension также поддерживает вложенные конструкции, позволяя создавать списки более сложной структуры.

### Создание матрицы:

```python
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flattened_matrix = [x for row in matrix for x in row]
# Результат: [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

### Получение диагонали матрицы:

```python
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
diagonal = [matrix[i][i] for i in range(len(matrix))]
# Результат: [1, 5, 9]
```
